<h1 class="text-center mt-4">Crop Recommendation</h1> <!-- Added page title -->

<div class="row mt-4">
  <!-- Left column: Map and Submit -->
  <div class="col-md-6">
    <div id="map" class="border rounded" style="height: 400px;"></div>

    <div class="text-center mt-3">
      <button
        class="btn btn-success btn-lg"
        (click)="onSubmit()"
        [disabled]="!weatherData || loading">
        {{ loading ? 'Predicting...' : 'Recommend Crop' }}
      </button>
    </div>

    <div class="text-center mt-2">
      <button class="btn btn-info btn-sm" (click)="fetchWeather()">ğŸŒ¤ Fetch Weather</button>
    </div>

    <div class="text-center text-muted mt-2">
      ğŸ“ Selected: {{ lat.toFixed(4) }}, {{ lon.toFixed(4) }}
    </div>
  </div>

  <!-- Right column: Inputs + Results -->
  <div class="col-md-6">
    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h5 class="card-title">Soil Inputs</h5>
        <div class="mb-2">
          <label>pH</label>
          <input type="number" step="0.1" [(ngModel)]="soilData.ph" class="form-control" />
        </div>
        <div class="mb-2">
          <label>Nitrogen (N)</label>
          <input type="number" step="0.01" [(ngModel)]="soilData.N" class="form-control" />
        </div>
        <div class="mb-2">
          <label>Phosphorus (P)</label>
          <input type="number" step="1" [(ngModel)]="soilData.P" class="form-control" />
        </div>
        <div class="mb-2">
          <label>Potassium (K)</label>
          <input type="number" step="1" [(ngModel)]="soilData.K" class="form-control" />
        </div>
      </div>
    </div>

    <div *ngIf="weatherData" class="card shadow-sm mb-3">
      <div class="card-body">
        <h5 class="card-title">Weather</h5>
        <p>ğŸŒ¡ï¸ Temperature: <strong>{{ weatherData.temperature }} Â°C</strong></p>
        <p>ğŸ’§ Humidity: <strong>{{ weatherData.humidity }} %</strong></p>
        <p>ğŸŒ§ï¸ Rainfall: <strong>{{ weatherData.rainfall }} mm</strong></p>
      </div>
    </div>

    <div *ngIf="predictedCrop" class="alert alert-success text-center">
      ğŸŒ± <strong>Recommended Crop:</strong> {{ predictedCrop }}
    </div>

    <div *ngIf="error" class="alert alert-danger text-center">
      {{ error }}
    </div>
  </div>
</div>

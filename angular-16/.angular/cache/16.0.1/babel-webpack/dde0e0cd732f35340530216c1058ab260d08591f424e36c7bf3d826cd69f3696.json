{"ast":null,"code":"import * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/classification.service\";\nimport * as i2 from \"@angular/common\";\nfunction ClassifierComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"h3\", 7);\n    i0.ɵɵtext(2, \"Prediction:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.prediction);\n  }\n}\nfunction ClassifierComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"h3\", 9);\n    i0.ɵɵtext(2, \"Error:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nclass ClassifierComponent {\n  constructor(classifier) {\n    this.classifier = classifier;\n    this.prediction = null;\n    this.loading = false;\n    this.error = null;\n  }\n  ngOnInit() {\n    const map = L.map('map').setView([36.8065, 10.1815], 13); // Default view\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n    map.on('click', e => {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n      this.lat = lat;\n      this.lon = lng;\n      console.log(`Selected location: Latitude ${lat}, Longitude ${lng}`);\n    });\n  }\n  ngAfterViewInit() {\n    // Prevent map from intercepting button clicks\n    const button = document.querySelector('.classifier-form button');\n    if (button) {\n      L.DomEvent.disableClickPropagation(button);\n    }\n  }\n  onSubmit() {\n    this.prediction = null;\n    this.error = null;\n    this.loading = true;\n    this.classifier.predict(this.lat, this.lon).subscribe({\n      next: res => {\n        this.prediction = res.prediction;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Error fetching prediction';\n        console.error(err);\n        this.loading = false;\n      }\n    });\n  }\n}\nClassifierComponent.ɵfac = function ClassifierComponent_Factory(t) {\n  return new (t || ClassifierComponent)(i0.ɵɵdirectiveInject(i1.ClassificationService));\n};\nClassifierComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ClassifierComponent,\n  selectors: [[\"app-classifier\"]],\n  decls: 7,\n  vars: 4,\n  consts: [[1, \"classifier-map\"], [\"id\", \"map\", 2, \"height\", \"400px\", \"width\", \"100%\", \"border\", \"2px solid #ccc\", \"border-radius\", \"8px\"], [1, \"classifier-form\", \"mt-4\", \"text-center\"], [1, \"btn\", \"btn-success\", \"btn-lg\", 3, \"disabled\", \"click\"], [\"class\", \"result mt-4 p-3\", \"style\", \"background-color: #e9f7ef; border: 1px solid #28a745; border-radius: 8px;\", 4, \"ngIf\"], [\"class\", \"error mt-4 p-3\", \"style\", \"background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px;\", 4, \"ngIf\"], [1, \"result\", \"mt-4\", \"p-3\", 2, \"background-color\", \"#e9f7ef\", \"border\", \"1px solid #28a745\", \"border-radius\", \"8px\"], [1, \"text-success\"], [1, \"error\", \"mt-4\", \"p-3\", 2, \"background-color\", \"#f8d7da\", \"border\", \"1px solid #f5c6cb\", \"border-radius\", \"8px\"], [1, \"text-danger\"]],\n  template: function ClassifierComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"div\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ClassifierComponent_Template_button_click_3_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, ClassifierComponent_div_5_Template, 5, 1, \"div\", 4);\n      i0.ɵɵtemplate(6, ClassifierComponent_div_6_Template, 5, 1, \"div\", 5);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", ctx.loading || ctx.lat == null || ctx.lon == null);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Classifying\\u2026\" : \"Classify Land\", \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.prediction);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.error);\n    }\n  },\n  dependencies: [i2.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ClassifierComponent };","map":{"version":3,"names":["L","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","prediction","ctx_r1","error","ClassifierComponent","constructor","classifier","loading","ngOnInit","map","setView","tileLayer","attribution","addTo","on","e","lat","lng","latlng","lon","console","log","ngAfterViewInit","button","document","querySelector","DomEvent","disableClickPropagation","onSubmit","predict","subscribe","next","res","err","ɵɵdirectiveInject","i1","ClassificationService","selectors","decls","vars","consts","template","ClassifierComponent_Template","rf","ctx","ɵɵelement","ɵɵlistener","ClassifierComponent_Template_button_click_3_listener","ɵɵtemplate","ClassifierComponent_div_5_Template","ClassifierComponent_div_6_Template","ɵɵproperty","ɵɵtextInterpolate1"],"sources":["C:\\Users\\MSI\\Downloads\\admin-pro-angular-lite-master\\admin-pro-angular-lite-master\\angular-16\\src\\app\\pages\\classifier\\classifier.component.ts","C:\\Users\\MSI\\Downloads\\admin-pro-angular-lite-master\\admin-pro-angular-lite-master\\angular-16\\src\\app\\pages\\classifier\\classifier.component.html"],"sourcesContent":["// src/app/components/classifier/classifier.component.ts\nimport { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { ClassificationService, PredictionResponse } from 'src/app/Services/classification.service';\nimport { NgIf } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as L from 'leaflet';\n\n@Component({\n  selector: 'app-classifier',\n  templateUrl: './classifier.component.html',\n  styleUrls: ['./classifier.component.scss']\n})\nexport class ClassifierComponent implements OnInit, AfterViewInit {\n  lat!: number;\n  lon!: number;\n  prediction: string | null = null;\n  loading = false;\n  error: string | null = null;\n\n  constructor(private classifier: ClassificationService) {}\n\n  ngOnInit(): void {\n    const map = L.map('map').setView([36.8065, 10.1815], 13); // Default view\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n\n    map.on('click', (e: any) => {\n      const { lat, lng } = e.latlng;\n      this.lat = lat;\n      this.lon = lng;\n      console.log(`Selected location: Latitude ${lat}, Longitude ${lng}`);\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // Prevent map from intercepting button clicks\n    const button = document.querySelector('.classifier-form button') as HTMLElement;\n    if (button) {\n      L.DomEvent.disableClickPropagation(button);\n    }\n  }\n\n  onSubmit() {\n    this.prediction = null;\n    this.error = null;\n    this.loading = true;\n\n    this.classifier.predict(this.lat, this.lon).subscribe({\n      next: (res: PredictionResponse) => {\n        this.prediction = res.prediction;\n        this.loading = false;\n      },\n      error: (err) => {\n        this.error = 'Error fetching prediction';\n        console.error(err);\n        this.loading = false;\n      }\n    });\n  }\n}\n","<!-- src/app/components/classifier/classifier.component.html -->\n<div class=\"classifier-map\">\n  <div id=\"map\" style=\"height: 400px; width: 100%; border: 2px solid #ccc; border-radius: 8px;\"></div> <!-- Enhanced map dimensions and styling -->\n</div>\n\n<div class=\"classifier-form mt-4 text-center\"> <!-- Centered button and added spacing -->\n  <button class=\"btn btn-success btn-lg\" (click)=\"onSubmit()\" [disabled]=\"loading || lat == null || lon == null\">\n    {{ loading ? 'Classifying…' : 'Classify Land' }}\n  </button>\n</div>\n\n<div *ngIf=\"prediction\" class=\"result mt-4 p-3\" style=\"background-color: #e9f7ef; border: 1px solid #28a745; border-radius: 8px;\">\n  <h3 class=\"text-success\">Prediction:</h3>\n  <p>{{ prediction }}</p>\n</div>\n\n<div *ngIf=\"error\" class=\"error mt-4 p-3\" style=\"background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px;\">\n  <h3 class=\"text-danger\">Error:</h3>\n  <p>{{ error }}</p>\n</div>\n"],"mappings":"AAKA,OAAO,KAAKA,CAAC,MAAM,SAAS;;;;;;ICM5BC,EAAA,CAAAC,cAAA,aAAkI;IACvGD,EAAA,CAAAE,MAAA,kBAAW;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACzCH,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAE,MAAA,GAAgB;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;IAApBH,EAAA,CAAAI,SAAA,GAAgB;IAAhBJ,EAAA,CAAAK,iBAAA,CAAAC,MAAA,CAAAC,UAAA,CAAgB;;;;;IAGrBP,EAAA,CAAAC,cAAA,aAA4H;IAClGD,EAAA,CAAAE,MAAA,aAAM;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACnCH,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAE,MAAA,GAAW;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;IAAfH,EAAA,CAAAI,SAAA,GAAW;IAAXJ,EAAA,CAAAK,iBAAA,CAAAG,MAAA,CAAAC,KAAA,CAAW;;;ADXhB,MAKaC,mBAAmB;EAO9BC,YAAoBC,UAAiC;IAAjC,KAAAA,UAAU,GAAVA,UAAU;IAJ9B,KAAAL,UAAU,GAAkB,IAAI;IAChC,KAAAM,OAAO,GAAG,KAAK;IACf,KAAAJ,KAAK,GAAkB,IAAI;EAE6B;EAExDK,QAAQA,CAAA;IACN,MAAMC,GAAG,GAAGhB,CAAC,CAACgB,GAAG,CAAC,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IAE1DjB,CAAC,CAACkB,SAAS,CAAC,oDAAoD,EAAE;MAChEC,WAAW,EAAE;KACd,CAAC,CAACC,KAAK,CAACJ,GAAG,CAAC;IAEbA,GAAG,CAACK,EAAE,CAAC,OAAO,EAAGC,CAAM,IAAI;MACzB,MAAM;QAAEC,GAAG;QAAEC;MAAG,CAAE,GAAGF,CAAC,CAACG,MAAM;MAC7B,IAAI,CAACF,GAAG,GAAGA,GAAG;MACd,IAAI,CAACG,GAAG,GAAGF,GAAG;MACdG,OAAO,CAACC,GAAG,CAAC,+BAA+BL,GAAG,eAAeC,GAAG,EAAE,CAAC;IACrE,CAAC,CAAC;EACJ;EAEAK,eAAeA,CAAA;IACb;IACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,yBAAyB,CAAgB;IAC/E,IAAIF,MAAM,EAAE;MACV9B,CAAC,CAACiC,QAAQ,CAACC,uBAAuB,CAACJ,MAAM,CAAC;;EAE9C;EAEAK,QAAQA,CAAA;IACN,IAAI,CAAC3B,UAAU,GAAG,IAAI;IACtB,IAAI,CAACE,KAAK,GAAG,IAAI;IACjB,IAAI,CAACI,OAAO,GAAG,IAAI;IAEnB,IAAI,CAACD,UAAU,CAACuB,OAAO,CAAC,IAAI,CAACb,GAAG,EAAE,IAAI,CAACG,GAAG,CAAC,CAACW,SAAS,CAAC;MACpDC,IAAI,EAAGC,GAAuB,IAAI;QAChC,IAAI,CAAC/B,UAAU,GAAG+B,GAAG,CAAC/B,UAAU;QAChC,IAAI,CAACM,OAAO,GAAG,KAAK;MACtB,CAAC;MACDJ,KAAK,EAAG8B,GAAG,IAAI;QACb,IAAI,CAAC9B,KAAK,GAAG,2BAA2B;QACxCiB,OAAO,CAACjB,KAAK,CAAC8B,GAAG,CAAC;QAClB,IAAI,CAAC1B,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;;AAhDWH,mBAAmB,C;mBAAnBA,mBAAmB,EAAAV,EAAA,CAAAwC,iBAAA,CAAAC,EAAA,CAAAC,qBAAA;AAAA;AAAnBhC,mBAAmB,C;QAAnBA,mBAAmB;EAAAiC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,6BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCXhCjD,EAAA,CAAAC,cAAA,aAA4B;MAC1BD,EAAA,CAAAmD,SAAA,aAAoG;MACtGnD,EAAA,CAAAG,YAAA,EAAM;MAENH,EAAA,CAAAC,cAAA,aAA8C;MACLD,EAAA,CAAAoD,UAAA,mBAAAC,qDAAA;QAAA,OAASH,GAAA,CAAAhB,QAAA,EAAU;MAAA,EAAC;MACzDlC,EAAA,CAAAE,MAAA,GACF;MAAAF,EAAA,CAAAG,YAAA,EAAS;MAGXH,EAAA,CAAAsD,UAAA,IAAAC,kCAAA,iBAGM;MAENvD,EAAA,CAAAsD,UAAA,IAAAE,kCAAA,iBAGM;;;MAbwDxD,EAAA,CAAAI,SAAA,GAAkD;MAAlDJ,EAAA,CAAAyD,UAAA,aAAAP,GAAA,CAAArC,OAAA,IAAAqC,GAAA,CAAA5B,GAAA,YAAA4B,GAAA,CAAAzB,GAAA,SAAkD;MAC5GzB,EAAA,CAAAI,SAAA,GACF;MADEJ,EAAA,CAAA0D,kBAAA,MAAAR,GAAA,CAAArC,OAAA,8CACF;MAGIb,EAAA,CAAAI,SAAA,GAAgB;MAAhBJ,EAAA,CAAAyD,UAAA,SAAAP,GAAA,CAAA3C,UAAA,CAAgB;MAKhBP,EAAA,CAAAI,SAAA,GAAW;MAAXJ,EAAA,CAAAyD,UAAA,SAAAP,GAAA,CAAAzC,KAAA,CAAW;;;;;;SDJJC,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}
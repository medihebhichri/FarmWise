{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Valid email is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \" Password (min 6 chars) is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nclass LoginComponent {\n  constructor(authService, router, fb) {\n    this.authService = authService;\n    this.router = router;\n    this.fb = fb;\n    this.username = '';\n    this.password = '';\n    this.errorMessage = '';\n    this.form = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n  onLogin() {\n    const credentials = {\n      username: this.username,\n      password: this.password\n    };\n    this.authService.signin(credentials).subscribe({\n      next: res => {\n        localStorage.setItem('token', res.token);\n        localStorage.setItem('username', res.username);\n        localStorage.setItem('roles', JSON.stringify(res.roles));\n        const roleNames = res.roles;\n        if (roleNames.includes('ROLE_ADMIN')) {\n          this.router.navigate(['/admin']);\n        } else if (roleNames.includes('ROLE_USER')) {\n          this.router.navigate(['/product']);\n        } else {\n          this.router.navigate(['/']);\n        }\n      },\n      error: () => {\n        this.errorMessage = 'Invalid username or password';\n      }\n    });\n  }\n  onSubmit() {\n    if (this.form.valid) {\n      const {\n        email,\n        password\n      } = this.form.value;\n      this.username = email;\n      this.password = password;\n      this.onLogin();\n    } else {\n      this.errorMessage = 'Please fill in all required fields correctly.';\n    }\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 21,\n  vars: 4,\n  consts: [[1, \"auth-wrapper\", \"d-flex\", \"align-items-center\", \"justify-content-center\"], [1, \"card\", \"p-4\", 2, \"width\", \"350px\"], [1, \"mb-3\", \"text-center\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"email\", \"formControlName\", \"email\", 1, \"form-control\"], [\"class\", \"text-danger small\", 4, \"ngIf\"], [\"type\", \"password\", \"formControlName\", \"password\", 1, \"form-control\"], [1, \"btn\", \"btn-primary\", \"w-100\", 3, \"disabled\"], [1, \"mt-2\", \"text-center\"], [\"routerLink\", \"/auth/signup\"], [1, \"text-danger\", \"small\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h4\", 2);\n      i0.ɵɵtext(3, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"input\", 6);\n      i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 2, 0, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 5);\n      i0.ɵɵtext(12, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 8);\n      i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 0, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"button\", 9);\n      i0.ɵɵtext(16, \" Sign In \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"p\", 10);\n      i0.ɵɵtext(18, \" Don\\u2019t have an account? \");\n      i0.ɵɵelementStart(19, \"a\", 11);\n      i0.ɵɵtext(20, \"Sign up\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.form.controls[\"email\"].invalid && ctx.form.touched);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.form.controls[\"password\"].invalid && ctx.form.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.form.invalid);\n    }\n  },\n  dependencies: [i4.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i2.RouterLink],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { LoginComponent };","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent","constructor","authService","router","fb","username","password","errorMessage","form","group","email","required","minLength","onLogin","credentials","signin","subscribe","next","res","localStorage","setItem","token","JSON","stringify","roles","roleNames","includes","navigate","error","onSubmit","valid","value","ɵɵdirectiveInject","i1","AuthService","i2","Router","i3","FormBuilder","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_4_listener","ɵɵelement","ɵɵtemplate","LoginComponent_div_9_Template","LoginComponent_div_14_Template","ɵɵadvance","ɵɵproperty","controls","invalid","touched"],"sources":["C:\\Users\\MSI\\Downloads\\admin-pro-angular-lite-master\\admin-pro-angular-lite-master\\angular-16\\src\\app\\pages\\auth\\login\\login.component.ts","C:\\Users\\MSI\\Downloads\\admin-pro-angular-lite-master\\admin-pro-angular-lite-master\\angular-16\\src\\app\\pages\\auth\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/Services/auth.service';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  standalone: false,\n  styleUrls: ['./login.component.scss'], \n})\nexport class LoginComponent {\n  username = '';\n  password = '';\n  errorMessage = '';\n  form: FormGroup;\n\n  constructor(private authService: AuthService, private router: Router, private fb: FormBuilder) {\n    this.form = this.fb.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n\n  onLogin(): void {\n    const credentials = { username: this.username, password: this.password };\n  \n    this.authService.signin(credentials).subscribe({\n      next: (res) => {\n        localStorage.setItem('token', res.token);\n        localStorage.setItem('username', res.username);\n        localStorage.setItem('roles', JSON.stringify(res.roles));\n  \n        const roleNames: string[] = res.roles;\n  \n        if (roleNames.includes('ROLE_ADMIN')) {\n          this.router.navigate(['/admin']);\n        } else if (roleNames.includes('ROLE_USER')) {\n          this.router.navigate(['/product']);\n        } else {\n          this.router.navigate(['/']);\n        }\n      },\n      error: () => {\n        this.errorMessage = 'Invalid username or password';\n      }\n    });\n  }\n\n  onSubmit(): void {\n    if (this.form.valid) {\n      const { email, password } = this.form.value;\n      this.username = email;\n      this.password = password;\n      this.onLogin();\n    } else {\n      this.errorMessage = 'Please fill in all required fields correctly.';\n    }\n  }\n}\n","<div class=\"auth-wrapper d-flex align-items-center justify-content-center\">\n  <div class=\"card p-4\" style=\"width: 350px;\">\n    <h4 class=\"mb-3 text-center\">Login</h4>\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Email</label>\n        <input type=\"email\" class=\"form-control\" formControlName=\"email\">\n        <div *ngIf=\"form.controls['email'].invalid && form.touched\"\n             class=\"text-danger small\">\n          Valid email is required.\n        </div>\n      </div>\n      <div class=\"mb-3\">\n        <label class=\"form-label\">Password</label>\n        <input type=\"password\" class=\"form-control\" formControlName=\"password\">\n        <div *ngIf=\"form.controls['password'].invalid && form.touched\"\n             class=\"text-danger small\">\n          Password (min 6 chars) is required.\n        </div>\n      </div>\n      <button class=\"btn btn-primary w-100\" [disabled]=\"form.invalid\">\n        Sign In\n      </button>\n      <p class=\"mt-2 text-center\">\n        Don’t have an account?\n        <a routerLink=\"/auth/signup\">Sign up</a>\n      </p>\n    </form>\n  </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { __decorate } from \"tslib\";\n// src/app/components/classifier/classifier.component.ts\nimport { Component } from '@angular/core';\nimport * as L from 'leaflet';\nlet ClassifierComponent = class ClassifierComponent {\n  constructor(svc) {\n    this.svc = svc;\n    this.tileUrl = null;\n    this.prediction = null;\n    this.loading = false;\n    this.error = null;\n  }\n  ngOnInit() {\n    this.map = L.map('map', {\n      maxBounds: L.latLngBounds(L.latLng(-90, -180), L.latLng(90, 180)),\n      maxBoundsViscosity: 1.0\n    }).setView([36.8065, 10.1815], 13);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(this.map);\n    this.map.on('click', e => {\n      this.lat = e.latlng.lat;\n      this.lon = e.latlng.lng;\n    });\n  }\n  ngAfterViewInit() {\n    const button = document.querySelector('.classifier-form button');\n    if (button) {\n      L.DomEvent.disableClickPropagation(button);\n    }\n  }\n  onSubmit() {\n    this.reset();\n    this.loading = true;\n    this.svc.predict(this.lat, this.lon).subscribe({\n      next: res => {\n        this.prediction = res.prediction;\n        this.tileUrl = `data:image/png;base64,${res.tile}`;\n        this.loading = false;\n      },\n      error: () => {\n        this.error = 'Failed to load tile or prediction';\n        this.loading = false;\n      }\n    });\n  }\n  reset() {\n    this.tileUrl = null;\n    this.prediction = null;\n    this.error = null;\n  }\n};\nClassifierComponent = __decorate([Component({\n  selector: 'app-classifier',\n  templateUrl: './classifier.component.html',\n  styleUrls: ['./classifier.component.scss']\n})], ClassifierComponent);\nexport { ClassifierComponent };","map":{"version":3,"names":["Component","L","ClassifierComponent","constructor","svc","tileUrl","prediction","loading","error","ngOnInit","map","maxBounds","latLngBounds","latLng","maxBoundsViscosity","setView","tileLayer","attribution","addTo","on","e","lat","latlng","lon","lng","ngAfterViewInit","button","document","querySelector","DomEvent","disableClickPropagation","onSubmit","reset","predict","subscribe","next","res","tile","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\MSI\\Downloads\\admin-pro-angular-lite-master\\admin-pro-angular-lite-master\\angular-16\\src\\app\\pages\\classifier\\classifier.component.ts"],"sourcesContent":["// src/app/components/classifier/classifier.component.ts\nimport { Component, AfterViewInit, OnInit } from '@angular/core';\nimport * as L from 'leaflet';\n\n@Component({\n  selector: 'app-classifier',\n  templateUrl: './classifier.component.html',\n  styleUrls: ['./classifier.component.scss']\n})\nexport class ClassifierComponent implements OnInit, AfterViewInit {\n  lat!: number;\n  lon!: number;\n\n  tileUrl: string | null = null;\n  prediction: string | null = null;\n  loading = false;\n  error: string | null = null;\n\n  private map!: L.Map;\n\n  constructor(private svc: ClassificationService) {}\n\n  ngOnInit(): void {\n    this.map = L.map('map', {\n      maxBounds: L.latLngBounds(\n        L.latLng(-90, -180),\n        L.latLng(90, 180)\n      ),\n      maxBoundsViscosity: 1.0\n    }).setView([36.8065, 10.1815], 13);\n\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(this.map);\n\n    this.map.on('click', (e: any) => {\n      this.lat = e.latlng.lat;\n      this.lon = e.latlng.lng;\n    });\n  }\n\n  ngAfterViewInit(): void {\n    const button = document.querySelector('.classifier-form button') as HTMLElement;\n    if (button) {\n      L.DomEvent.disableClickPropagation(button);\n    }\n  }\n\n  onSubmit(): void {\n    this.reset();\n    this.loading = true;\n\n    this.svc.predict(this.lat, this.lon).subscribe({\n      next: (res: PredictionResponse & { tile: string }) => {\n        this.prediction = res.prediction;\n        this.tileUrl = `data:image/png;base64,${res.tile}`;\n        this.loading = false;\n      },\n      error: () => {\n        this.error = 'Failed to load tile or prediction';\n        this.loading = false;\n      }\n    });\n  }\n\n  private reset(): void {\n    this.tileUrl = null;\n    this.prediction = null;\n    this.error = null;\n  }\n}\n"],"mappings":";AAAA;AACA,SAASA,SAAS,QAA+B,eAAe;AAChE,OAAO,KAAKC,CAAC,MAAM,SAAS;AAO5B,IAAaC,mBAAmB,GAAhC,MAAaA,mBAAmB;EAW9BC,YAAoBC,GAA0B;IAA1B,KAAAA,GAAG,GAAHA,GAAG;IAPvB,KAAAC,OAAO,GAAkB,IAAI;IAC7B,KAAAC,UAAU,GAAkB,IAAI;IAChC,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,KAAK,GAAkB,IAAI;EAIsB;EAEjDC,QAAQA,CAAA;IACN,IAAI,CAACC,GAAG,GAAGT,CAAC,CAACS,GAAG,CAAC,KAAK,EAAE;MACtBC,SAAS,EAAEV,CAAC,CAACW,YAAY,CACvBX,CAAC,CAACY,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,EACnBZ,CAAC,CAACY,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAClB;MACDC,kBAAkB,EAAE;KACrB,CAAC,CAACC,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC;IAElCd,CAAC,CAACe,SAAS,CAAC,oDAAoD,EAAE;MAChEC,WAAW,EAAE;KACd,CAAC,CAACC,KAAK,CAAC,IAAI,CAACR,GAAG,CAAC;IAElB,IAAI,CAACA,GAAG,CAACS,EAAE,CAAC,OAAO,EAAGC,CAAM,IAAI;MAC9B,IAAI,CAACC,GAAG,GAAGD,CAAC,CAACE,MAAM,CAACD,GAAG;MACvB,IAAI,CAACE,GAAG,GAAGH,CAAC,CAACE,MAAM,CAACE,GAAG;IACzB,CAAC,CAAC;EACJ;EAEAC,eAAeA,CAAA;IACb,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,yBAAyB,CAAgB;IAC/E,IAAIF,MAAM,EAAE;MACVzB,CAAC,CAAC4B,QAAQ,CAACC,uBAAuB,CAACJ,MAAM,CAAC;;EAE9C;EAEAK,QAAQA,CAAA;IACN,IAAI,CAACC,KAAK,EAAE;IACZ,IAAI,CAACzB,OAAO,GAAG,IAAI;IAEnB,IAAI,CAACH,GAAG,CAAC6B,OAAO,CAAC,IAAI,CAACZ,GAAG,EAAE,IAAI,CAACE,GAAG,CAAC,CAACW,SAAS,CAAC;MAC7CC,IAAI,EAAGC,GAA0C,IAAI;QACnD,IAAI,CAAC9B,UAAU,GAAG8B,GAAG,CAAC9B,UAAU;QAChC,IAAI,CAACD,OAAO,GAAG,yBAAyB+B,GAAG,CAACC,IAAI,EAAE;QAClD,IAAI,CAAC9B,OAAO,GAAG,KAAK;MACtB,CAAC;MACDC,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACA,KAAK,GAAG,mCAAmC;QAChD,IAAI,CAACD,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EAEQyB,KAAKA,CAAA;IACX,IAAI,CAAC3B,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACE,KAAK,GAAG,IAAI;EACnB;CACD;AA7DYN,mBAAmB,GAAAoC,UAAA,EAL/BtC,SAAS,CAAC;EACTuC,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACWvC,mBAAmB,CA6D/B;SA7DYA,mBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}